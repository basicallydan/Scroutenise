var DirectionsRouteHelpers={getPathAsLatLngArray:function(d,l){if(typeof l==="undefined"){l=0}var k=d.routes[0].legs[0],h=k.distance.value,n=[];for(var f=0;f<k.steps.length;f++){var c=k.steps[f].start_location;var e=f+1<k.steps.length?k.steps[f+1].start_location:k.steps[f].end_location;var g=k.steps[f].distance.value;n.push(c);if(g>l){var j=Math.round(g/l);var b=k.steps[f].path.length/j;for(var m=1;m<k.steps[f].path.length;m+=b){var a=Math.round(m);if(a<k.steps[f].path.length-1&&a>0){n.push(k.steps[f].path[a])}}}}return n}};if(typeof(google.maps.LatLng.pointAtAngleWithRadius)==="undefined"){google.maps.LatLng.prototype.pointAtAngleWithRadius=function(c,f){var g=this.lat();var h=this.lng();var i=6371000;f=typeof(f)=="number"?f:typeof(f)=="string"&&f.trim()!=""?+f:NaN;f=f/i;c=c.toRad();var b=g.toRad(),e=h.toRad();var a=Math.asin(Math.sin(b)*Math.cos(f)+Math.cos(b)*Math.sin(f)*Math.cos(c));var d=e+Math.atan2(Math.sin(c)*Math.sin(f)*Math.cos(b),Math.cos(f)-Math.sin(b)*Math.sin(a));d=(d+3*Math.PI)%(2*Math.PI)-Math.PI;return new google.maps.LatLng(a.toDeg(),d.toDeg())}}if(typeof(google.maps.LatLng.getLatLngBounds)==="undefined"){google.maps.LatLng.prototype.getLatLngBounds=function(a){var d=this.pointAtAngleWithRadius(45,a);var c=this.pointAtAngleWithRadius(225,a);var b=new google.maps.LatLngBounds(c,d);return b}}if(typeof(google.maps.LatLngBounds.expandBy)==="undefined"){google.maps.LatLngBounds.prototype.expandBy=function(a){var d=this.getNorthEast().pointAtAngleWithRadius(45,a);var c=this.getSouthWest().pointAtAngleWithRadius(225,a);var b=new google.maps.LatLngBounds(c,d);return b}}if(typeof(google.maps.Map.everyInfoWindow)==="undefined"){google.maps.Map.prototype.everyInfoWindow=[]}if(typeof(google.maps.Map.allMarkers)==="undefined"){google.maps.Map.prototype.allMarkers=[]}if(typeof(google.maps.Map.allCircles)==="undefined"){google.maps.Map.prototype.allCircles=[]}if(typeof(google.maps.Map.addMarker)==="undefined"){google.maps.Map.prototype.addMarker=function(a){a.setMap(this);this.allMarkers.push(a)}}if(typeof(google.maps.Map.clearMarkers)==="undefined"){google.maps.Map.prototype.clearMarkers=function(){if(this.allMarkers){for(var a=0;a<this.allMarkers.length;a++){this.allMarkers[a].setMap(null)}}this.allMarkers=[]}}if(typeof(google.maps.Map.clearCircles)==="undefined"){google.maps.Map.prototype.clearCircles=function(){if(this.allCircles){for(var a=0;a<this.allCircles.length;a++){this.allCircles[a].setMap(null)}}this.allCircles=[]}}if(typeof(google.maps.Map.addCircle)==="undefined"){google.maps.Map.prototype.addCircle=function(a){a.setMap(this);this.allCircles.push(a)}}if(typeof(google.maps.Map.addInfoWindow)==="undefined"){google.maps.Map.prototype.addInfoWindow=function(b,a){var c=this;google.maps.event.addListener(a,"click",function(){for(var d=0;d<c.everyInfoWindow.length;d++){c.everyInfoWindow[d].close()}b.open(c,a)});google.maps.event.addListener(this,"click",function(){b.close()});this.everyInfoWindow.push(b)}}if(typeof(Number.prototype.toRad)==="undefined"){Number.prototype.toRad=function(){return this*Math.PI/180}}if(typeof(Number.prototype.toDeg)==="undefined"){Number.prototype.toDeg=function(){return this*180/Math.PI}}var PlaceTypes={capitalize:function(d,a){if(d.length==2){var b=d.split("");if(PlaceTypes.Vowels.indexOf(b[0])==-1&&PlaceTypes.Vowels.indexOf(b[1])==-1){return d.toUpperCase()}else{return d.toLowerCase()}}if(PlaceTypes.WordsNotToCapitalize.indexOf(d)==-1||a==0){var c=d.substring(0,1).toUpperCase()+d.substring(1);return c}},getPlaceTypesAsHuman:function(){var c=[];for(var a=0;a<PlaceTypes.PlaceTypes.length;a++){c.push(PlaceTypes.underscoredToHuman(PlaceTypes.PlaceTypes[a]))}for(var b in PlaceTypes.Aliases){c.push(PlaceTypes.underscoredToHuman(b))}return c},underscoredToHuman:function(d){var c=d.split("_");var b=[];for(var a=0;a<c.length;a++){b.push(PlaceTypes.capitalize(c[a],a))}return b.join(" ")},getActualTypeIfAlias:function(a){if(typeof(PlaceTypes.Aliases[a])=="undefined"){return a}return PlaceTypes.Aliases[a]}};PlaceTypes.Vowels=["a","e","i","o","u"];PlaceTypes.WordsNotToCapitalize=["of","the","a","an","it"];PlaceTypes.Aliases={petrol_station:"gas_station",booze_station:"liquor_store",coffee_shop:"cafe",shopping_centre:"shopping_mall",bike_shop:"bicycle_store"};PlaceTypes.PlaceTypes=["accounting","airport","amusement_park","aquarium","art_gallery","atm","bakery","bank","bar","beauty_salon","bicycle_store","book_store","bowling_alley","bus_station","cafe","campground","car_dealer","car_rental","car_repair","car_wash","casino","cemetery","church","city_hall","clothing_store","convenience_store","courthouse","dentist","department_store","doctor","electrician","electronics_store","embassy","establishment","finance","fire_station","florist","food","funeral_home","furniture_store","gas_station","general_contractor","geocode","grocery_or_supermarket","gym","hair_care","hardware_store","health","hindu_temple","home_goods_store","hospital","insurance_agency","jewelry_store","laundry","lawyer","library","liquor_store","local_government_office","locksmith","lodging","meal_delivery","meal_takeaway","mosque","movie_rental","movie_theater","moving_company","museum","night_club","painter","park","parking","pet_store","pharmacy","physiotherapist","place_of_worship","plumber","police","post_office","real_estate_agency","restaurant","roofing_contractor","rv_park","school","shoe_store","shopping_mall","spa","stadium","storage","store","subway_station","synagogue","taxi_stand","train_station","travel_agency","university","veterinary_care","zoo"];var InfoWindowHelpers={getInfoWindowFor:function(b){var a="";for(var d=0;d<b.types.length;d++){a+='<li class="label">'+PlaceTypes.underscoredToHuman(b.types[d])+"</li>"}var e='<div class="result-info-content"><h2 class="result-info-content-heading">'+b.name+'</h2><div class="result-info-content-body"><ul class="result-types">'+a+"</ul></div></div>";var c=new google.maps.InfoWindow({content:e});return c}};function Scroutenise(e,a,d,b,c){this.map=e;this.searchService=new google.maps.places.PlacesService(e);this.directionsService=new google.maps.DirectionsService();this.directionsDisplay=new google.maps.DirectionsRenderer();this.directionsDisplay.setMap(this.map);this.autocomplete=c}Scroutenise.prototype.debugMode=false;Scroutenise.prototype.searchMethod="RADIUS";Scroutenise.prototype.renderedResultReferences=[];Scroutenise.prototype.OnSearchStart=function(a){this.onSearchStart=a};Scroutenise.prototype.OnSearchStep=function(a){this.onSearchStep=a};Scroutenise.prototype.OnSearchEnd=function(a){this.onSearchend=a};Scroutenise.prototype.addMarkerFromPlacesResult=function(a){if(this.renderedResultReferences.indexOf(a.id)==-1){var c=new google.maps.LatLng(a.geometry.location.lat(),a.geometry.location.lng());var b=new google.maps.Marker({position:c,title:a.name});this.map.addInfoWindow(InfoWindowHelpers.getInfoWindowFor(a),b);this.map.addMarker(b);this.renderedResultReferences.push(a.id)}};Scroutenise.prototype.clearResults=function(){this.map.clearMarkers();this.renderedResultReferences=[]};Scroutenise.prototype.searchWithinBounds=function(a,b,d){var c={bounds:b,types:a};this.searchService.search(c,d)};Scroutenise.prototype.searchAroundPoint=function(e,c,a,b,f){var d={location:e,radius:a,types:c};this.searchService.search(d,f)};Scroutenise.prototype.getDirections=function(g,c,e,b){var d=this;this.map.clearMarkers();this.map.clearCircles();this.clearResults();if(typeof(this.onSearchStart)!="undefined"){this.onSearchStart()}var a=this.getSelectedTravelMode();var f={origin:g,destination:c,provideRouteAlternatives:false,travelMode:a,unitSystem:google.maps.UnitSystem.METRIC};d.directionsService.route(f,function(h,j){if(j==google.maps.DirectionsStatus.OK){d.directionsDisplay.setDirections(h);var m=DirectionsRouteHelpers.getPathAsLatLngArray(h,b/2);if(d.searchMethod=="BOUNDS"){for(var n=0;n<5;n++){var k=h.routes[0].bounds;var l=k.expandBy(b);d.searchWithinBounds(e,l,function(q,o){if(o==google.maps.places.PlacesServiceStatus.OK){if(this.debugMode==true){var r=new google.maps.Rectangle();r.setBounds(l);r.setMap(d.map)}for(var p=0;p<q.length;p++){if(MapHelpers.withinRadiusOfAPoint(q[p],m,b)){d.addMarkerFromPlacesResult(q[p])}}}})}}else{if(d.searchMethod=="RADIUS"){for(var n=0;n<m.length;n++){d.searchAroundPoint(m[n],e,b,d.searchService,function(q,o){if(o==google.maps.places.PlacesServiceStatus.OK){for(var p=0;p<q.length;p++){d.addMarkerFromPlacesResult(q[p])}if(typeof(d.onSearchStep)!="undefined"){d.onSearchStep(1,1)}}});if(typeof(d.onSearchStep)!="undefined"){d.onSearchStep(n,m.length)}if(this.debugMode==true){d.map.addCircle(new google.maps.Circle({center:m[n],radius:b}))}}}}}})};